# GO kratos 微服务秒杀系统

## 基建系统与中间件

> 考察与选择用于系统的中间件

- [x] CentOS
- [x] Docker
- [x] docker-compose

- [x] 数据库MySQL

- [x] 缓存Redis
- [ ] 缓存Memcache

- [ ] 消息队列 rabbitmq
- [x] 消息队列 kafka

- [ ] mycat-阿里云 Java
- [x] Gaea-小米 Golang
- [ ] ShardingSphere apache Java

- [x] 压力测试 wrk
- [ ] 压力测试 jmeter

## 痛点问题

| 描述 | 方案 | 实现 |
|:----|:------|:-----|
| 构建秒杀微服务工程目录 | kratos | OK |
| 如何解决超卖 | 预减库存 | OK |
| 如何实施压力测试 | wrk | OK |
| 如何处理订单队列-kafka | | OK |
| 如何实现redis分布式锁 | | OK |
| 如何实现MySQL主从复制 |  | OK |
| 如何解决分布式事务 | dtm-分布式事务管理器 | ING | 
| 如何防刷 | uid 固定时间限流 | | 
| 如何反止链接提前泄露 | 产品 id 哈希 | |
| 如何反止暴力遍历 | 产品 id 经过布隆过滤器校验一下 | |
| 如何处理超时未支付的订单 | 下单成功时抛出抛出延时消息，比如 30 分钟。到期检测订单状态，失败 INCR 把库存还回去 | |
| 如何实现服务降级 服务熔断 过载保护 | | |
| 如何解决分布式session | | |
| 如何优化Nginx | | |   
| 如何解决RPC分布式补偿机制 | | |
| 如何实现分库分表 | mycat | |
| 如何实现对象级缓存-redis | | |
| 如何实现通用缓存key的封装 | 设计模式之模板模式 | |
| 如何实现redis库存与数据库保持一致 | | |
| 为什么redis库存出现负数 | | |
| 为什么要单独维护一个秒杀结束标记 | | |
| 如何实现分布式定时关闭订单 | | |
| 如何优化秒杀场景SQL | | |
| 如何利用lua脚本进行限流和分布式锁 | | |
| 如何对系统做访问统计 | | | 
| 如何解决多数据库源配置 | | |


## 交流群

请加 uuk98k 好友或者扫码加好友, 验证回复 秒杀 按照指引进群

![uuk98k](http://img.g-t.ink/wx_20210812145925.jpg)