# seckill (GO kratos 微服务秒杀系统)

go kratos seckill system


## Client-API

- [x] 用户登录API
- [x] 用户注册API
- [x] 商品详情API
- [x] 商品下单API
- [x] 用户修改信息API
- [x] 秒杀商品API
- [ ] 商品列表API
- [ ] 添加地址API
- [ ] 修改地址API
- [ ] 删除地址API
- [ ] 查看地址API


## 整体模块功能和任务

- [x] 搭建MySQL服务器
- [x] 搭建redis服务器
- [x] 搭建消息队列服务器
- [x] 搭建服务发现与配置中心-nacos
- [x] 搭建服务发现与配置中心-etcd
- [ ] 分布式定时任务服务
- [ ] 搭建网关服务

-----

- [x] 简化版用户登录&注册
  - [x] 密码加密
  - [ ] 拦截器实现
  - [ ] token实现
- [ ] 用户中心
- [ ] 用户订单列表和详情
- [x] 商品秒杀列表
- [x] 秒杀商品详情
- [x] 秒杀订单
- [ ] 支付功能
- [ ] 短信通知
- [ ] 邮件通知

- [ ] docker编排服务
- [ ] 分布式session
- [ ] 主从MySQL 数据库集群
- [ ] Redis集群 哨兵模式
- [ ] nginx负载均衡
- [x] 消息队列削峰
- [ ] CI/CD
- [ ] 压力测试

## Q&A

如何实现MySQL读写分离?

如何设计redis-key策略?

如何解决超卖问题?

如何解决分布式session?

如何实现redis分布式锁? 

分布式RPC补偿?


## 2021年07月05日14:09:33

- [x] 搭建mysql主从复制架构
- [ ] 搭建mysql读写分离中间件 gaea
- [ ] 搭建读写分离之后wrk测试效果

## 2021年06月04日14:28:27 任务

- [x] ent完成用户表的CURD
- [x] 调整目录结构
- [x] redis连接以及读取和更新
- [x] 消息队列连接配置以及读取和更新

## 阶段1

> 一把梭、所有服务部署在一台服务器上 通过压力测试瓶顶 通过调优系统和增加配置对比最后结果

- [ ] 完善计划API接口
- [ ] 优化接口代码
- [ ] 简单的测试、单元测试、压力测试


- [ ] 网关接入
- [ ] redis分布式事务锁实现
- [ ] 定时任务实现
- [ ] 消息队列kafka接入


- [ ] 分布式session处理
- [ ] html渲染 缓存


- [ ] 安全优化设计
- [ ] 限流、降级、熔断实现
- [ ] 监控部署

## 阶段2

> 分布式部署服务


## 阶段3

> k8s构建系统


## 相关资料

[项目工程化参考](https://github.com/go-kratos/beer-shop)


## ent的使用

## TODO

关于mysql连接数

假设现在连接数是151个 现在mysql的最多同时151客户单同时操作?

如果加入连接池之后呢？(连接的时间缩短)

如果读写分离之后呢？(增加了读写的速度)

如果是集群之后呢? (分担单机的压力)

加redis增加读数据的速度

加kafka增加写的速度
